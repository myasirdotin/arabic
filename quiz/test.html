<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Test and improve your Arabic verb conjugation skills with this interactive quiz." />
    <title>Arabic Verb Quiz | Practice Arabic Verb Conjugations</title>
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="../css/quiz.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet" />
  </head>

  <body>
    <div class="container">
      <header role="banner">
        <div class="header-content">
          <h1>Arabic Verb Quiz</h1>
          <p class="subtitle">Test and improve your knowledge of Arabic verb conjugations</p>
        </div>
      </header>

      <main role="main">
        <section class="quiz-intro" id="quiz-intro">
          <h2 class="visually-hidden">Quiz Introduction</h2>
          <div class="intro-content">
            <p>Welcome to the Arabic Verb Quiz! This interactive tool will help you practice conjugating Arabic verbs across different tenses and forms.</p>
            <ul class="quiz-features">
              <li>‚úì Choose from multiple difficulty levels</li>
              <li>‚úì Get instant feedback on your answers</li>
              <li>‚úì Track your progress with detailed results</li>
              <li>‚úì Learn with helpful hints</li>
            </ul>
            <button id="open-difficulty-modal" class="start-quiz-btn" aria-haspopup="dialog">Start Quiz</button>
          </div>
        </section>

        <!-- Difficulty Selection Modal -->
        <dialog id="difficulty-modal" class="modal" aria-labelledby="difficulty-modal-title">
          <div class="modal-content">
            <h2 id="difficulty-modal-title">Select Your Difficulty Level</h2>
            <p>Choose the level that matches your current knowledge:</p>
            <div class="difficulty-options">
              <button class="difficulty-btn" data-difficulty="basic" aria-label="Basic level - common regular verbs">
                <span class="difficulty-icon">üìó</span>
                <span class="difficulty-label">Basic</span>
                <span class="difficulty-desc">Common regular verbs</span>
              </button>
              <button class="difficulty-btn" data-difficulty="intermediate" aria-label="Intermediate level - common irregular verbs">
                <span class="difficulty-icon">üìò</span>
                <span class="difficulty-label">Intermediate</span>
                <span class="difficulty-desc">Common irregular verbs</span>
              </button>
              <button class="difficulty-btn" data-difficulty="advanced" aria-label="Advanced level - complex verb forms">
                <span class="difficulty-icon">üìï</span>
                <span class="difficulty-label">Advanced</span>
                <span class="difficulty-desc">Complex verb forms</span>
              </button>
              <button class="difficulty-btn" data-difficulty="all" aria-label="Mixed difficulty - all verb types">
                <span class="difficulty-icon">üé≤</span>
                <span class="difficulty-label">Mixed</span>
                <span class="difficulty-desc">All verb types</span>
              </button>
            </div>
            <button class="modal-close-btn" aria-label="Close difficulty selection">√ó</button>
          </div>
        </dialog>

        <section class="quiz-form" id="quiz-form" hidden>
          <h2 class="visually-hidden">Quiz Questions</h2>
          <div class="quiz-header">
            <div class="progress-container" aria-label="Quiz progress">
              <div class="progress-bar" id="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <div class="quiz-meta">
              <div class="question-counter" id="question-counter" aria-live="polite">Question 1 of 10</div>
              <div class="timer" id="timer" aria-live="off">Time: 0:00</div>
            </div>
          </div>

          <div id="question-container" role="region" aria-live="polite">
            <!-- Questions will be dynamically inserted here -->
          </div>

          <div class="feedback" id="feedback" aria-live="polite"></div>

          <div class="navigation-buttons">
            <button id="prev-btn" class="nav-btn" disabled>
              <span aria-hidden="true">‚Üê</span> Previous
            </button>
            <button id="next-btn" class="nav-btn primary-btn">
              Next <span aria-hidden="true">‚Üí</span>
            </button>
            <button id="hint-btn" class="nav-btn secondary-btn">Hint</button>
            <button id="reset-btn" class="nav-btn warning-btn">Reset</button>
          </div>
        </section>

        <section class="quiz-result" id="quiz-result" hidden>
          <div class="result-content">
            <h2 class="result-title">Quiz Completed!</h2>
            <div class="result-stats">
              <div class="stat-box">
                <span class="stat-label">Your Score</span>
                <span class="stat-value" id="score">0%</span>
              </div>
              <div class="stat-box">
                <span class="stat-label">Time Taken</span>
                <span class="stat-value" id="time-display">0:00</span>
              </div>
              <div class="stat-box">
                <span class="stat-label">Correct Answers</span>
                <span class="stat-value" id="correct-answers">0/0</span>
              </div>
            </div>
            
            <div id="performance-feedback" class="performance-feedback">
              <!-- Performance feedback will be inserted here -->
            </div>
            
            <div class="result-actions">
              <button class="try-again-btn primary-btn" id="try-again-btn">Try Again</button>
              <a href="other_words.html" class="try-again-btn secondary-btn">
                Practice Other Words
              </a>
              <button id="review-answers-btn" class="try-again-btn">Review Answers</button>
            </div>
          </div>
        </section>
      </main>

      <footer role="contentinfo">
        <div class="footer-content">
          <p>¬© 2023 Arabic Learning Tools. All rights reserved.</p>
          <nav aria-label="Secondary navigation">
            <ul>
              <li><a href="../privacy.html">Privacy Policy</a></li>
              <li><a href="../terms.html">Terms of Service</a></li>
              <li><a href="../contact.html">Contact Us</a></li>
            </ul>
          </nav>
        </div>
      </footer>
    </div>

    <script src="quiz.js" defer></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // Modal functionality
        const modal = document.getElementById("difficulty-modal");
        const openModalBtn = document.getElementById("open-difficulty-modal");
        const closeModalBtn = document.querySelector(".modal-close-btn");
        
        // Show modal
        openModalBtn.addEventListener("click", () => {
          modal.showModal();
          modal.querySelector('.difficulty-btn').focus();
        });
        
        // Close modal
        closeModalBtn.addEventListener("click", () => {
          modal.close();
        });
        
        // Close modal when clicking outside
        modal.addEventListener("click", (e) => {
          if (e.target === modal) {
            modal.close();
          }
        });
        
        // Handle difficulty selection
        document.querySelectorAll(".difficulty-btn").forEach(button => {
          button.addEventListener("click", () => {
            const selectedDifficulty = button.dataset.difficulty;
            startQuiz(selectedDifficulty);
            modal.close();
          });
        });

        function startQuiz(difficulty) {
          console.log("Quiz started with difficulty:", difficulty);
          document.getElementById("quiz-intro").hidden = true;
          document.getElementById("quiz-form").hidden = false;
          
          // Initialize quiz based on difficulty
          // This would be replaced with your actual quiz initialization code
          initializeQuiz(difficulty);
        }
        
        function initializeQuiz(difficulty) {
          // Your quiz initialization logic here
          // This would set up questions, timer, etc.
        }
      });
    </script>
  </body>
</html>